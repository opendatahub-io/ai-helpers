# Generated by Claude Code
# Upload Slack Thread to JIRA

Export Slack thread conversations to JIRA tickets as formatted markdown comments.

## Quick Start

```bash
/jira:upload-slack-thread <slack-thread-url> [ticket-key]
```

## Prerequisites

### 1. Install slackdump

**macOS (Homebrew):**
```bash
brew install slackdump
```

### 2. Authenticate with Slack Workspace

```bash
# Add your Slack workspace
> source ~/.config/mcp-slack.env && slackdump workspace new -enterprise -cookie "$SLACK_XOXD_TOKEN" -token "$SLACK_XOXC_TOKEN" redhat-internal.slack.com 

> source ~/.config/mcp-slack.env && slackdump list channels -cookie "$SLACK_XOXD_TOKEN" -token "$SLACK_XOXC_TOKEN" redhat-internal.slack.com 

```

**Verify authentication:**
```bash
slackdump workspace list
```

### 3. JIRA MCP Server

Ensure the JIRA MCP server is configured in your Claude Code settings with appropriate credentials.

## What This Does

1. Parses Slack thread URL to extract channel and timestamp
2. Uses slackdump to export thread messages
3. Formats messages as clean markdown with proper formatting
4. Posts the transcript as a comment on the specified JIRA ticket

## Files

```
upload-slack-thread/
├── SKILL.md                    # Main skill documentation
├── README.md                   # This file
├── scripts/
│   ├── url_parser.py           # Slack URL parsing
│   ├── ticket_extractor.py     # JIRA ticket key extraction
│   ├── slack_fetcher.py        # Data models for Slack messages
│   ├── markdown_formatter.py   # Markdown formatting utilities
│   └── jira_comment_poster.py  # Data models for JIRA comments
```

## Usage Examples

### Basic Usage (with explicit ticket)

```
/jira:upload-slack-thread https://myworkspace.slack.com/archives/C09Q8MD1V0Q/p1769333522823869 JN-1234
```

### Auto-detect Ticket from Thread

```
/jira:upload-slack-thread https://myworkspace.slack.com/archives/C09Q8MD1V0Q/p1769333522823869
```
(Skill finds JIRA ticket key mentioned in the thread messages)

### With AI Summary

```
/jira:upload-slack-thread https://myworkspace.slack.com/archives/C09Q8MD1V0Q/p1769333522823869 JN-1234 --summary
```

## Output

The skill creates a JIRA comment with:

- **Header**: Export timestamp, Slack URL, channel name, message count
- **Summary** (optional): AI-generated summary of main topics
- **Transcript**: Full thread messages with timestamps and usernames

## Troubleshooting

### "slackdump not found"

```bash
# Verify PATH
echo $PATH

# Install via Homebrew (macOS)
brew install slackdump

# Or download binary from GitHub releases
```

### "Authentication failed" / "Not authenticated"

```bash
# Re-authenticate with workspace
slackdump workspace add

# List configured workspaces
slackdump workspace list

# Remove and re-add if needed
slackdump workspace remove <workspace-name>
slackdump workspace add
```

### "Invalid URL format"

Ensure the URL matches the pattern:
```
https://workspace.slack.com/archives/CHANNEL_ID/pTIMESTAMP
```

Example:
```
https://redhat-internal.slack.com/archives/C09Q8MD1V0Q/p1769333522823869
```

### "Unable to access JIRA ticket"

- Verify the ticket key format (e.g., `JN-1234`)
- Check you have permission to comment on the ticket
- Ensure JIRA MCP server is properly configured

### "Empty thread"

- Verify the thread URL points to a valid thread (not a channel)
- Check you have access to the Slack channel

## Slack URL Format

Slack thread URLs follow this pattern:

```
https://<workspace>.slack.com/archives/<CHANNEL_ID>/p<TIMESTAMP>
```

- **workspace**: Your Slack workspace subdomain
- **CHANNEL_ID**: Starts with C (public), G (private group), or D (DM)
- **TIMESTAMP**: 16-digit timestamp without decimal (e.g., `p1769333522823869`)

The skill converts `p1769333522823869` to `1769333522.823869` for the API.

## Support

For issues:
1. Check `SKILL.md` for detailed implementation documentation
2. Verify slackdump is installed and authenticated
3. Confirm JIRA MCP server is configured
4. Review error messages for specific guidance

## Version History

- **1.0.0** (2026-01-27) - Initial release
  - slackdump integration for Slack thread export
  - Markdown formatting with Slack formatting conversion
  - JIRA MCP integration for comment posting
  - Auto-detection of JIRA ticket keys from thread content
