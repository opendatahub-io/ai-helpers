# Instructions

## CLIs

This python (3.13) repo uses the astral.sh stack along other CLIs:

- `devcontainer` - environment isolation
- `gh` - for github access
- `gcloud` - for gcp access
- `kubectl` - for kubernetes access
- `helm` - for helm chart\release management
- `just` - common repo commands management
- `pre-commit` - triggers all of the following CLIs
- `uv` - venv and CLIs management
- `ruff` - format and lint
- `ty` - type checking
- `pytest` - testing
- `tox` - tests automation
- `typos` - spell checking
- `commitlint` - conventional commits adherence
- `pysentry` - dependency security
- `osv-scanner` - general security
- `claude` - for an objective AI review
- `lintok` - file size linter
- `ties` - file-to-file sync with transformations
- `yamlfmt` - yaml format and lint
- `biomejs` - json format and lint
- `dockerfmt` - dockerfile format and lint
- `rumdl` - markdown format and lint
- `lychee` - broken link detection
- `taplo` - general toml format and lint
- `pyproject-fmt` - pyproject.toml format and lint
- `tox-toml-fmt` - tox.toml format and lint

## Git

Commit messages must follow the conventional commits standard like so:  

```text
`<type>`(`<scope>`): `<up-to-60-characters>`  
`<optional-details>`  
Assisted-by: `<name-of-code-assistant>`  
```

## Just Pre-Commit

Run checks via _just p_ (changed files) or just pa (all files).

- If unsure of current state or starting after manual edits,
    run just p first to identify pre-existing issues.
- You may proceed without just p if confident,
    but stay vigilant for baseline errors.
- Favor just commands over direct CLI execution.

## Code

Follow the Test-Driven-Development (TDD) methodology.

When reading code, files or terminal outputs - try to read
necessary lines and information only, to reduce token usage.
You may use `grep`, `sed`, `head`, `tail`, `jq`, `xargs` and so on.

Try to keep files shorter than 500 lines.

Do not create empty `__init__.py` files.

Any code or file significantly generated or edited by you
must have at least one inline/header comment:  

```text
Generated by `<name-of-code-assistant>`
```

or  

```text
Edited by `<name-of-code-assistant>`  
```

## Logging

Use concise f-string logging with self-documenting expressions:

```python
# Preferred: f-string with = for self-documenting output
logger.debug(f"{user_id=}, {status=}, {count=}")
# Output: user_id='abc123', status='active', count=42

# Avoid: verbose, repetitive formatting
logger.debug(f"user_id: {user_id}, status: {status}, count: {count}")
logger.debug("user_id: %s, status: %s", user_id, status)
```

- Use `f'{var=}'` syntax for automatic variable name + value logging
- One log statement per logical event, not per variable
- No prose in debug logsâ€”just data
- Reserve comments for *why*, not *what*

## Edit Attempts

Each sequence of edits and code generation without
`just p` or `just pa` is an Edit Attempt.  
Edit Attempts should be atomic, focused and encapsulated.  

Before any Edit Attempt:

- a descriptive line:

  ```text
  `[EDIT]` `<description>`: `STARTING`  
  ```

After any Edit Attempt:  

- `just p` or `just pa` (to `git add .` & `pre-commit` in a single command)
- a summary line:

  ```text
  `[EDIT]` `<description>`: `<status>`  
  ```

  where `<status>` is `SUCCESS` or `FAILED`

## Active Technologies
- Python 3.13 + Slack MCP server (MCP tools), jira Python library (>=3.0.0) (001-jira-upload-slack-thread)
- Temporary file storage in `/tmp/claude/` directory (001-jira-upload-slack-thread)

## Recent Changes
- 001-jira-upload-slack-thread: Added Python 3.13 + Slack MCP server (MCP tools), jira Python library (>=3.0.0)
